"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
function genPropValidation(prop) {
    let out = '';
    if (prop.validations.length) {
        if (!prop.required) {
            out += `if let Some(val) = input.${prop.name} {\n`;
        }
        else {
            out += `let val = &input.${prop.name}\n`;
        }
        out += `${prop.validations.map(v => `is.${v.name}(val,${v.args.join(',')})?;`)}\n`;
        if (!prop.required) {
            out += `}`;
        }
    }
    return out;
}
function genObject(obj) {
    let out = genStruct(obj);
    if (obj.props.map(prop => prop.validations.length).reduce((a, b) => a + b) > 0) {
        out += `pub fn validate_${obj.name.toLowerCase()}(input:${obj.name}){
            ${obj.props.map(genPropValidation).filter(elm => elm).join('\n')}
        }`;
    }
    ;
    return out;
}
exports.genObject = genObject;
let typeMap = (input) => {
    return { string: 'String',
        number: 'f32' }[input] || input;
};
function genStruct(obj) {
    return `#[derive(Debug,Serialize,Deserialize)]
    pub struct ${obj.name} {
        ${obj.props.map(prop => `  ${prop.name}: ${prop.required ? typeMap(prop.type) : `Option<${typeMap(prop.type)}>`}`).join(';\n')}
    }\n`;
}
exports.genStruct = genStruct;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicnVzdC5qcyIsInNvdXJjZVJvb3QiOiJDOi9Vc2Vycy9PdXNzYW1hL1Byb2plY3RzL2dsdWUvc3JjLyIsInNvdXJjZXMiOlsicnVzdC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOztBQUlBLDJCQUEyQixJQUFRO0lBQy9CLElBQUksR0FBRyxHQUFHLEVBQUUsQ0FBQztJQUNiLEVBQUUsQ0FBQSxDQUFDLElBQUksQ0FBQyxXQUFXLENBQUMsTUFBTSxDQUFDLENBQUEsQ0FBQztRQUV4QixFQUFFLENBQUEsQ0FBQyxDQUFDLElBQUksQ0FBQyxRQUFRLENBQUMsQ0FBQSxDQUFDO1lBQ2YsR0FBRyxJQUFHLDRCQUE0QixJQUFJLENBQUMsSUFBSSxNQUFNLENBQUM7UUFDdEQsQ0FBQztRQUFBLElBQUksQ0FBQSxDQUFDO1lBQ0YsR0FBRyxJQUFHLG9CQUFvQixJQUFJLENBQUMsSUFBSSxJQUFJLENBQUM7UUFDNUMsQ0FBQztRQUNELEdBQUcsSUFBRSxHQUFHLElBQUksQ0FBQyxXQUFXLENBQUMsR0FBRyxDQUFDLENBQUMsSUFDMUIsTUFBTSxDQUFDLENBQUMsSUFBSSxRQUFRLENBQUMsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDO1FBQ25ELEVBQUUsQ0FBQSxDQUFDLENBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxDQUFBLENBQUM7WUFDZixHQUFHLElBQUcsR0FBRyxDQUFDO1FBQ2QsQ0FBQztJQUNMLENBQUM7SUFDRCxNQUFNLENBQUMsR0FBRyxDQUFDO0FBQ2YsQ0FBQztBQUdELG1CQUEwQixHQUFrQjtJQUN4QyxJQUFJLEdBQUcsR0FBRyxTQUFTLENBQUMsR0FBRyxDQUFDLENBQUM7SUFDekIsRUFBRSxDQUFBLENBQUMsR0FBRyxDQUFDLEtBQUssQ0FBQyxHQUFHLENBQUMsSUFBSSxJQUFFLElBQUksQ0FBQyxXQUFXLENBQUMsTUFBTSxDQUFDLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxFQUFDLENBQUMsS0FBRyxDQUFDLEdBQUMsQ0FBQyxDQUFDLEdBQUMsQ0FBQyxDQUFDLENBQUEsQ0FBQztRQUNsRSxHQUFHLElBQUUsbUJBQW1CLEdBQUcsQ0FBQyxJQUFJLENBQUMsV0FBVyxFQUFFLFVBQVUsR0FBRyxDQUFDLElBQUk7Y0FDekQsR0FBRyxDQUFDLEtBQUssQ0FBQyxHQUFHLENBQUMsaUJBQWlCLENBQUMsQ0FBQyxNQUFNLENBQUMsR0FBRyxJQUFFLEdBQUcsQ0FBQyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUM7VUFDakUsQ0FBQTtJQUNOLENBQUM7SUFBQSxDQUFDO0lBQ0YsTUFBTSxDQUFDLEdBQUcsQ0FBQztBQUNmLENBQUM7QUFSRCw4QkFRQztBQUdELElBQUksT0FBTyxHQUFHLENBQUMsS0FBSztJQUNoQixNQUFNLENBQUMsRUFBQyxNQUFNLEVBQUMsUUFBUTtRQUN2QixNQUFNLEVBQUMsS0FBSyxFQUFDLENBQUMsS0FBSyxDQUFDLElBQUksS0FBSyxDQUFDO0FBQ2xDLENBQUMsQ0FBQTtBQUVELG1CQUEwQixHQUFpQjtJQUN2QyxNQUFNLENBQUM7aUJBQ00sR0FBRyxDQUFDLElBQUk7VUFDZixHQUFHLENBQUMsS0FBSyxDQUFDLEdBQUcsQ0FBQyxJQUFJLElBQ2hCLEtBQUssSUFBSSxDQUFDLElBQUksS0FBSyxJQUFJLENBQUMsUUFBUSxHQUFFLE9BQU8sQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLEdBQUcsVUFBVSxPQUFPLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxHQUFJLEVBQUUsQ0FBQyxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUM7UUFDMUcsQ0FBQztBQUNULENBQUM7QUFORCw4QkFNQyJ9